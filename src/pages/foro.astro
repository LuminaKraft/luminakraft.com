---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getTranslation } from "../utils/i18n";

// Definir el idioma
const locale = 'es';

// Traducir según el idioma
const t = (key: string) => getTranslation(key, locale);

// Categorías del foro
const categories = [
  {
    id: 1,
    title: "Anuncios Oficiales",
    description: "Comunicados importantes, actualizaciones y avisos del equipo de LuminaKraft",
    topics: 42,
    posts: 386,
    icon: "bullhorn",
    color: "text-yellow-400"
  },
  {
    id: 2,
    title: "Survival",
    description: "Discusiones sobre nuestro servidor survival, preguntas y sugerencias",
    topics: 124,
    posts: 2378,
    icon: "tree",
    color: "text-green-400"
  },
  {
    id: 3,
    title: "SkyBlock",
    description: "Todo sobre el servidor SkyBlock: estrategias, comercio, islas y más",
    topics: 98,
    posts: 1845,
    icon: "mountain",
    color: "text-blue-400"
  },
  {
    id: 4,
    title: "Factions",
    description: "Reclutamiento de facciones, alianzas, guerras y tácticas de juego",
    topics: 76,
    posts: 2103,
    icon: "shield",
    color: "text-red-400"
  },
  {
    id: 5,
    title: "Creative",
    description: "Comparte tus creaciones, busca inspiración y consejos de construcción",
    topics: 54,
    posts: 1267,
    icon: "paint-brush",
    color: "text-purple-400"
  },
  {
    id: 6,
    title: "Ayuda Técnica",
    description: "Problemas técnicos, configuración, rendimiento y bugs",
    topics: 87,
    posts: 943,
    icon: "wrench",
    color: "text-yellow-500"
  },
  {
    id: 7,
    title: "Sugerencias",
    description: "Aporta ideas para mejorar nuestros servidores y comunidad",
    topics: 112,
    posts: 1532,
    icon: "lightbulb",
    color: "text-emerald-400"
  },
  {
    id: 8,
    title: "Comunidad",
    description: "Temas generales, presentaciones y conversaciones amistosas",
    topics: 143,
    posts: 3284,
    icon: "users",
    color: "text-sky-400"
  }
];

// Hilos recientes
const recentThreads = [
  {
    id: 1,
    title: "Guía para principiantes del servidor Survival 2025",
    category: "Survival",
    author: "SurvivalPro",
    authorAvatar: "https://mc-heads.net/avatar/SurvivalPro",
    replies: 28,
    views: 1243,
    lastActivity: "Hace 2 horas",
    pinned: true,
    unread: true
  },
  {
    id: 2,
    title: "Problemas con el plugin de economía - No puedo vender items",
    category: "Ayuda Técnica",
    author: "UserWithProblem",
    authorAvatar: "https://mc-heads.net/avatar/UserWithProblem",
    replies: 12,
    views: 156,
    lastActivity: "Hace 4 horas",
    unread: true
  },
  {
    id: 3,
    title: "Actualización SkyBlock Infinity - Todo lo que necesitas saber",
    category: "Anuncios Oficiales",
    author: "KristianDev",
    authorAvatar: "https://mc-heads.net/avatar/KristianDev",
    replies: 45,
    views: 2378,
    lastActivity: "Hace 6 horas",
    pinned: true
  },
  {
    id: 4,
    title: "Reclutamiento: Facción ShadowLords busca nuevos miembros",
    category: "Factions",
    author: "ShadowMaster",
    authorAvatar: "https://mc-heads.net/avatar/ShadowMaster",
    replies: 23,
    views: 478,
    lastActivity: "Hace 12 horas"
  },
  {
    id: 5,
    title: "Mi nueva construcción medieval en Creative - ¡Opiniones por favor!",
    category: "Creative",
    author: "BuilderKing",
    authorAvatar: "https://mc-heads.net/avatar/BuilderKing",
    replies: 34,
    views: 689,
    lastActivity: "Hace 1 día"
  }
];

// Estadísticas del foro
const forumStats = {
  topics: 736,
  posts: 13738,
  users: 4852,
  newestUser: "CrafterNewbie"
};

// Staff destacado
const staffMembers = [
  {
    name: "KristianDev",
    role: "Admin",
    avatar: "https://mc-heads.net/avatar/KristianDev",
    posts: 1265
  },
  {
    name: "ModeratorPro",
    role: "Moderador",
    avatar: "https://mc-heads.net/avatar/ModeratorPro",
    posts: 984
  },
  {
    name: "HelperStar",
    role: "Ayudante",
    avatar: "https://mc-heads.net/avatar/HelperStar",
    posts: 752
  }
];
---

<BaseLayout 
  locale={locale}
  title="Foro | LuminaKraft Studios"
  description="Forma parte de nuestra comunidad en el foro oficial de LuminaKraft. Discute, comparte y conecta con otros jugadores."
>
  <section class="pt-32 pb-16 px-4 relative overflow-hidden">
    <div class="container mx-auto max-w-6xl">
      <h1 class="text-5xl font-bold text-center mb-4 text-primary animate-fade-up">Foro de LuminaKraft</h1>
      
      <p class="text-xl text-center text-white/90 mb-8 max-w-3xl mx-auto animate-fade-up animate-delay-200">
        Conecta con nuestra comunidad, resuelve dudas y comparte experiencias con otros jugadores.
      </p>

      <!-- Barra de navegación del foro -->
      <div class="forum-nav flex flex-wrap justify-center gap-4 mb-12 animate-fade-up animate-delay-300">
        <a href="#" class="px-4 py-2 bg-primary/90 text-white rounded-lg hover:bg-primary transition-colors">
          <i class="fas fa-home mr-2"></i> Inicio
        </a>
        <a href="#" class="px-4 py-2 bg-secondary/50 text-white rounded-lg hover:bg-secondary/80 transition-colors">
          <i class="fas fa-fire-alt mr-2"></i> Actividad Reciente
        </a>
        <a href="#" class="px-4 py-2 bg-secondary/50 text-white rounded-lg hover:bg-secondary/80 transition-colors">
          <i class="fas fa-star mr-2"></i> Sin Leer
        </a>
        <a href="#" class="px-4 py-2 bg-secondary/50 text-white rounded-lg hover:bg-secondary/80 transition-colors">
          <i class="fas fa-users mr-2"></i> Usuarios
        </a>
        <a href="#" class="px-4 py-2 bg-secondary/50 text-white rounded-lg hover:bg-secondary/80 transition-colors">
          <i class="fas fa-cog mr-2"></i> Mi Perfil
        </a>
      </div>

      <!-- Mensaje de bienvenida y botones principales -->
      <div class="welcome-banner bg-secondary/30 rounded-xl p-6 border border-primary/20 mb-8 animate-fade-up animate-delay-400">
        <div class="flex flex-col md:flex-row items-center justify-between">
          <div class="mb-6 md:mb-0">
            <h2 class="text-2xl font-bold mb-2 text-primary">Bienvenido al Foro Oficial</h2>
            <p class="text-white/90">Únete a las conversaciones, resuelve tus dudas y comparte tus experiencias.</p>
          </div>
          <div class="flex flex-wrap gap-4">
            <a href="#" class="px-6 py-2 bg-primary/90 text-white font-bold rounded-lg hover:bg-primary transition-colors shadow-sm hover:shadow-glow">
              <i class="fas fa-plus-circle mr-2"></i> Nuevo Tema
            </a>
            <a href="#" class="px-6 py-2 bg-secondary/50 text-white font-bold rounded-lg hover:bg-secondary/80 transition-colors">
              <i class="fas fa-search mr-2"></i> Buscar
            </a>
          </div>
        </div>
      </div>

      <!-- Categorías del foro -->
      <div class="forum-categories mb-12 animate-fade-up animate-delay-500">
        <h2 class="text-2xl font-bold mb-6 text-primary"><i class="fas fa-list-alt mr-2"></i> Categorías</h2>
        
        <div class="grid grid-cols-1 gap-4">
          {categories.map(category => (
            <div class="category-card bg-secondary/30 rounded-xl overflow-hidden border border-primary/20 hover:border-primary/50 transition-all hover:shadow-sm">
              <div class="p-4 flex flex-col md:flex-row gap-4 items-center md:items-start">
                <div class="category-icon w-14 h-14 flex items-center justify-center rounded-full bg-secondary/70 border border-primary/30 flex-shrink-0">
                  <i class={`fas fa-${category.icon} text-2xl ${category.color}`}></i>
                </div>
                <div class="category-info flex-grow text-center md:text-left">
                  <h3 class="text-xl font-bold text-white hover:text-primary transition-colors">
                    <a href="#">{category.title}</a>
                  </h3>
                  <p class="text-white/80 text-sm md:text-base">{category.description}</p>
                </div>
                <div class="category-stats flex gap-6 text-center md:text-right flex-shrink-0">
                  <div>
                    <div class="text-xl font-bold text-primary">{category.topics}</div>
                    <div class="text-white/70 text-sm">Temas</div>
                  </div>
                  <div>
                    <div class="text-xl font-bold text-primary">{category.posts}</div>
                    <div class="text-white/70 text-sm">Mensajes</div>
                  </div>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>

      <div class="flex flex-col lg:flex-row gap-8">
        <!-- Hilos recientes -->
        <div class="recent-threads w-full lg:w-2/3 animate-fade-up animate-delay-600">
          <h2 class="text-2xl font-bold mb-6 text-primary"><i class="fas fa-clock mr-2"></i> Actividad Reciente</h2>
          
          <div class="threads-list space-y-3">
            {recentThreads.map(thread => (
              <div class={`thread-card bg-secondary/30 rounded-xl p-4 border ${thread.pinned ? 'border-primary/50' : 'border-primary/20'} hover:border-primary/50 transition-all hover:shadow-sm`}>
                <div class="flex flex-col md:flex-row gap-4">
                  <div class="thread-info flex-grow">
                    <div class="flex items-center gap-2 mb-1">
                      {thread.pinned && <span class="bg-primary/90 text-white text-xs px-2 py-0.5 rounded-full"><i class="fas fa-thumbtack mr-1"></i> Fijado</span>}
                      <span class="bg-secondary/70 text-white/90 text-xs px-2 py-0.5 rounded-full">{thread.category}</span>
                      {thread.unread && <span class="bg-green-600/90 text-white text-xs px-2 py-0.5 rounded-full">Nuevo</span>}
                    </div>
                    <h3 class="text-lg font-bold text-white hover:text-primary transition-colors">
                      <a href="#">{thread.title}</a>
                    </h3>
                    <div class="flex items-center gap-2 mt-2">
                      <img src={thread.authorAvatar} alt={thread.author} class="w-6 h-6 rounded-full" />
                      <span class="text-white/70 text-sm">{thread.author}</span>
                      <span class="text-white/50 text-sm">• {thread.lastActivity}</span>
                    </div>
                  </div>
                  <div class="thread-stats flex flex-row md:flex-col gap-6 md:gap-2 text-center flex-shrink-0">
                    <div>
                      <div class="text-lg font-bold text-primary">{thread.replies}</div>
                      <div class="text-white/70 text-sm">Respuestas</div>
                    </div>
                    <div>
                      <div class="text-lg font-bold text-primary">{thread.views}</div>
                      <div class="text-white/70 text-sm">Vistas</div>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
          
          <div class="mt-6 text-center">
            <a href="#" class="px-6 py-2 bg-secondary/50 text-white rounded-lg hover:bg-secondary/80 transition-colors inline-block">
              Ver más temas <i class="fas fa-chevron-right ml-2"></i>
            </a>
          </div>
        </div>
        
        <!-- Sidebar -->
        <div class="sidebar w-full lg:w-1/3 animate-fade-up animate-delay-700">
          <!-- Buscador -->
          <div class="search-box bg-secondary/30 rounded-xl p-6 border border-primary/20 mb-8">
            <h3 class="text-xl font-bold mb-4 text-primary">Buscar en el Foro</h3>
            <div class="search-form flex">
              <input type="text" placeholder="Buscar temas o mensajes..." class="flex-1 bg-secondary/70 border border-primary/30 rounded-l-lg p-3 text-white focus:border-primary focus:outline-none transition-colors">
              <button class="bg-primary/80 hover:bg-primary text-white p-3 rounded-r-lg transition-colors">
                <i class="fas fa-search"></i>
              </button>
            </div>
          </div>
          
          <!-- Estadísticas -->
          <div class="stats-box bg-secondary/30 rounded-xl p-6 border border-primary/20 mb-8">
            <h3 class="text-xl font-bold mb-4 text-primary">Estadísticas del Foro</h3>
            <div class="grid grid-cols-2 gap-4">
              <div class="text-center">
                <div class="text-2xl font-bold text-primary">{forumStats.topics}</div>
                <div class="text-white/70">Temas</div>
              </div>
              <div class="text-center">
                <div class="text-2xl font-bold text-primary">{forumStats.posts}</div>
                <div class="text-white/70">Mensajes</div>
              </div>
              <div class="text-center">
                <div class="text-2xl font-bold text-primary">{forumStats.users}</div>
                <div class="text-white/70">Usuarios</div>
              </div>
              <div class="text-center">
                <div class="text-lg font-bold text-primary truncate">{forumStats.newestUser}</div>
                <div class="text-white/70">Último Usuario</div>
              </div>
            </div>
          </div>
          
          <!-- Staff -->
          <div class="staff-box bg-secondary/30 rounded-xl p-6 border border-primary/20 mb-8">
            <h3 class="text-xl font-bold mb-4 text-primary">Staff del Foro</h3>
            <div class="space-y-4">
              {staffMembers.map(staff => (
                <div class="staff-member flex items-center gap-3">
                  <img src={staff.avatar} alt={staff.name} class="w-10 h-10 rounded-full" />
                  <div>
                    <div class="font-bold text-white">{staff.name}</div>
                    <div class="flex items-center gap-2">
                      <span class="text-primary text-sm">{staff.role}</span>
                      <span class="text-white/50 text-xs">{staff.posts} mensajes</span>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
          
          <!-- Reglas rápidas -->
          <div class="rules-box bg-secondary/30 rounded-xl p-6 border border-primary/20">
            <h3 class="text-xl font-bold mb-4 text-primary">Reglas del Foro</h3>
            <ul class="space-y-2 text-white/90">
              <li class="flex items-start gap-2">
                <i class="fas fa-check text-primary mt-1 flex-shrink-0"></i>
                <span>Sé respetuoso con todos los usuarios</span>
              </li>
              <li class="flex items-start gap-2">
                <i class="fas fa-check text-primary mt-1 flex-shrink-0"></i>
                <span>No hagas spam ni publicidad</span>
              </li>
              <li class="flex items-start gap-2">
                <i class="fas fa-check text-primary mt-1 flex-shrink-0"></i>
                <span>Usa las categorías adecuadas para cada tema</span>
              </li>
              <li class="flex items-start gap-2">
                <i class="fas fa-check text-primary mt-1 flex-shrink-0"></i>
                <span>No compartas información personal</span>
              </li>
            </ul>
            <div class="mt-4">
              <a href="/terminos" class="text-primary hover:underline text-sm">Ver reglas completas</a>
            </div>
          </div>
        </div>
      </div>

      <!-- Mensaje de registro -->
      <div class="register-banner bg-primary/30 rounded-xl p-6 border border-primary/20 mt-12 text-center animate-fade-up animate-delay-800">
        <h3 class="text-2xl font-bold mb-3 text-white">¡Únete a Nuestra Comunidad!</h3>
        <p class="text-white/90 mb-6 max-w-2xl mx-auto">
          Regístrate para participar en las discusiones, recibir notificaciones y conectar con otros jugadores de LuminaKraft.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a href="#" class="px-8 py-3 rounded-lg bg-primary/90 text-white font-bold shadow-glow border border-primary/50 transition-all duration-300 hover:shadow-lg hover:bg-primary hover:border-primary hover:-translate-y-1">
            Registrarse Ahora
          </a>
          <a href="#" class="px-8 py-3 rounded-lg bg-transparent text-white font-bold border border-white/30 transition-all duration-300 hover:border-primary/50 hover:text-primary hover:-translate-y-1">
            Iniciar Sesión
          </a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  // Script para animaciones suaves al hacer scroll, usando JavaScript puro para compatibilidad
  document.addEventListener('DOMContentLoaded', function() {
    const animatedElements = document.querySelectorAll('.animate-fade-up');
    
    function checkVisibility() {
      animatedElements.forEach(element => {
        const elementTop = element.getBoundingClientRect().top;
        const elementVisible = 150;
        
        if (elementTop < window.innerHeight - elementVisible) {
          element.style.opacity = '1';
          element.style.transform = 'translateY(0)';
        }
      });
    }
    
    // Configuración inicial
    animatedElements.forEach(element => {
      const delay = element.classList.contains('animate-delay-200') ? 200 :
                   element.classList.contains('animate-delay-300') ? 300 :
                   element.classList.contains('animate-delay-400') ? 400 :
                   element.classList.contains('animate-delay-500') ? 500 :
                   element.classList.contains('animate-delay-600') ? 600 :
                   element.classList.contains('animate-delay-700') ? 700 :
                   element.classList.contains('animate-delay-800') ? 800 : 0;
      
      element.style.opacity = '0';
      element.style.transform = 'translateY(30px)';
      element.style.transition = `opacity 0.6s ease, transform 0.6s ease`;
      element.style.transitionDelay = `${delay}ms`;
    });
    
    // Verificar visibilidad inicialmente y al hacer scroll
    window.addEventListener('scroll', checkVisibility);
    checkVisibility();
  });
</script>
