---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getTranslation } from "../utils/i18n";

// Definir el idioma
const locale = 'es';

// Traducir según el idioma
const t = (key: string) => getTranslation(key, locale);

// Artículos de blog de ejemplo
const blogPosts = [
  {
    id: 1,
    title: "Lanzamiento del nuevo servidor Skyblock Infinity",
    slug: "lanzamiento-skyblock-infinity",
    excerpt: "Descubre todas las novedades de nuestro nuevo servidor Skyblock con economía renovada, islas personalizadas y más de 50 misiones únicas.",
    date: "27 de Marzo, 2025",
    author: "KristianDev",
    authorAvatar: "https://mc-heads.net/avatar/KristianDev",
    category: "Anuncios",
    tags: ["skyblock", "lanzamiento", "servidor"],
    image: "/imgs/servers/skyblock.webp",
    featured: true
  },
  {
    id: 2,
    title: "Guía completa del sistema de encantamientos personalizados",
    slug: "guia-encantamientos-personalizados",
    excerpt: "Todo lo que necesitas saber sobre nuestro exclusivo sistema de encantamientos personalizados: combinaciones, efectos y consejos.",
    date: "20 de Marzo, 2025",
    author: "GameMaster",
    authorAvatar: "https://mc-heads.net/avatar/GameMaster",
    category: "Guías",
    tags: ["encantamientos", "tutorial", "sistema"],
    image: "/imgs/blog/enchant-guide.webp"
  },
  {
    id: 3,
    title: "Resultados del torneo de PvP Primavera 2025",
    slug: "resultados-torneo-pvp-primavera-2025",
    excerpt: "Resumen de los intensos combates, ganadores y premios entregados en nuestro último torneo estacional de PvP.",
    date: "15 de Marzo, 2025",
    author: "TournamentHost",
    authorAvatar: "https://mc-heads.net/avatar/TournamentHost",
    category: "Eventos",
    tags: ["torneo", "pvp", "competición"],
    image: "/imgs/blog/tournament.webp"
  },
  {
    id: 4,
    title: "Las 10 construcciones más impresionantes del servidor Creative",
    slug: "construcciones-impresionantes-creative",
    excerpt: "Recorrido visual por las obras maestras arquitectónicas creadas por nuestra talentosa comunidad en el servidor Creative.",
    date: "10 de Marzo, 2025",
    author: "BuildMaster",
    authorAvatar: "https://mc-heads.net/avatar/BuildMaster",
    category: "Comunidad",
    tags: ["construcciones", "creative", "arquitectura"],
    image: "/imgs/blog/builds.webp"
  },
  {
    id: 5,
    title: "Entrevista con nuestro equipo de desarrollo: Entre bastidores",
    slug: "entrevista-equipo-desarrollo",
    excerpt: "Conoce al equipo detrás de LuminaKraft Studios: cómo trabajan, sus inspiraciones y planes futuros para la red de servidores.",
    date: "5 de Marzo, 2025",
    author: "CommunityManager",
    authorAvatar: "https://mc-heads.net/avatar/CommunityManager",
    category: "Entrevistas",
    tags: ["desarrollo", "equipo", "entrevista"],
    image: "/imgs/blog/dev-team.webp"
  },
  {
    id: 6,
    title: "Actualización de primavera: Todas las novedades y cambios",
    slug: "actualizacion-primavera-novedades",
    excerpt: "Detalle completo de todas las nuevas características, balanceos y correcciones implementadas en nuestra actualización trimestral.",
    date: "1 de Marzo, 2025",
    author: "KristianDev",
    authorAvatar: "https://mc-heads.net/avatar/KristianDev",
    category: "Actualizaciones",
    tags: ["parche", "actualización", "novedades"],
    image: "/imgs/blog/update.webp",
    featured: true
  }
];

// Categorías para el sidebar
const categories = [
  { name: "Todos", count: blogPosts.length },
  { name: "Anuncios", count: blogPosts.filter(post => post.category === "Anuncios").length },
  { name: "Guías", count: blogPosts.filter(post => post.category === "Guías").length },
  { name: "Eventos", count: blogPosts.filter(post => post.category === "Eventos").length },
  { name: "Comunidad", count: blogPosts.filter(post => post.category === "Comunidad").length },
  { name: "Entrevistas", count: blogPosts.filter(post => post.category === "Entrevistas").length },
  { name: "Actualizaciones", count: blogPosts.filter(post => post.category === "Actualizaciones").length },
];

// Tags populares
const popularTags = ["skyblock", "tutorial", "pvp", "actualización", "servidor", "comunidad", "eventos"];
---

<BaseLayout 
  locale={locale}
  title="Blog | LuminaKraft Studios"
  description="Noticias, guías, tutoriales y novedades sobre nuestros servidores de Minecraft y la comunidad de LuminaKraft."
>
  <section class="pt-32 pb-16 px-4 relative overflow-hidden">
    <div class="container mx-auto max-w-6xl">
      <h1 class="text-5xl font-bold text-center mb-4 text-primary animate-fade-up">Blog de LuminaKraft</h1>
      
      <p class="text-xl text-center text-white/90 mb-12 max-w-3xl mx-auto animate-fade-up animate-delay-200">
        Noticias, guías, eventos y toda la información sobre nuestra comunidad y servidores.
      </p>

      <!-- Artículos destacados -->
      <div class="featured-posts grid grid-cols-1 md:grid-cols-2 gap-8 mb-16 animate-fade-up animate-delay-300">
        {blogPosts.filter(post => post.featured).map(post => (
          <div class="featured-post bg-secondary/30 rounded-xl overflow-hidden border border-primary/20 hover:border-primary/50 transition-all hover:shadow-glow hover:-translate-y-1">
            <div class="post-image relative h-64 overflow-hidden">
              <img src={post.image} alt={post.title} class="w-full h-full object-cover transition-transform hover:scale-105 duration-500" />
              <span class="absolute top-4 left-4 bg-primary/90 text-white text-sm font-bold py-1 px-3 rounded-full">{post.category}</span>
            </div>
            <div class="post-content p-6">
              <h2 class="text-2xl font-bold mb-3 text-white hover:text-primary transition-colors">
                <a href={`/blog/${post.slug}`}>{post.title}</a>
              </h2>
              <p class="text-white/80 mb-4">{post.excerpt}</p>
              <div class="post-meta flex justify-between items-center">
                <div class="author flex items-center">
                  <img src={post.authorAvatar} alt={post.author} class="w-8 h-8 rounded-full mr-2" />
                  <span class="text-white/70 text-sm">{post.author}</span>
                </div>
                <span class="text-white/70 text-sm">{post.date}</span>
              </div>
            </div>
          </div>
        ))}
      </div>

      <div class="blog-content flex flex-col lg:flex-row gap-8">
        <!-- Listado principal de posts -->
        <div class="post-listing w-full lg:w-2/3 animate-fade-up animate-delay-400">
          <h2 class="text-3xl font-bold mb-6 text-primary">Artículos Recientes</h2>
          
          <div class="posts-grid space-y-8">
            {blogPosts.map(post => (
              <div class="post-card bg-secondary/30 rounded-xl overflow-hidden border border-primary/20 hover:border-primary/50 transition-all hover:shadow-glow hover:-translate-y-1 flex flex-col md:flex-row">
                <div class="post-image w-full md:w-1/3 h-48 md:h-auto overflow-hidden">
                  <img src={post.image} alt={post.title} class="w-full h-full object-cover transition-transform hover:scale-105 duration-500" />
                </div>
                <div class="post-content p-6 flex-1">
                  <div class="post-meta flex justify-between items-center mb-3">
                    <span class="text-primary/90 text-sm font-bold">{post.category}</span>
                    <span class="text-white/70 text-sm">{post.date}</span>
                  </div>
                  <h3 class="text-xl font-bold mb-3 text-white hover:text-primary transition-colors">
                    <a href={`/blog/${post.slug}`}>{post.title}</a>
                  </h3>
                  <p class="text-white/80 mb-4">{post.excerpt}</p>
                  <div class="flex justify-between items-center">
                    <div class="author flex items-center">
                      <img src={post.authorAvatar} alt={post.author} class="w-6 h-6 rounded-full mr-2" />
                      <span class="text-white/70 text-sm">{post.author}</span>
                    </div>
                    <a href={`/blog/${post.slug}`} class="text-primary hover:underline text-sm font-bold flex items-center">
                      Leer más <i class="fas fa-arrow-right ml-1 text-xs"></i>
                    </a>
                  </div>
                </div>
              </div>
            ))}
          </div>
          
          <div class="pagination flex justify-center mt-12 space-x-2">
            <a href="#" class="w-10 h-10 flex items-center justify-center rounded-full bg-secondary/50 text-white/80 hover:bg-primary/70 hover:text-white transition-colors">1</a>
            <a href="#" class="w-10 h-10 flex items-center justify-center rounded-full bg-secondary/50 text-white/80 hover:bg-primary/70 hover:text-white transition-colors">2</a>
            <a href="#" class="w-10 h-10 flex items-center justify-center rounded-full bg-primary/70 text-white font-bold">3</a>
            <a href="#" class="w-10 h-10 flex items-center justify-center rounded-full bg-secondary/50 text-white/80 hover:bg-primary/70 hover:text-white transition-colors">4</a>
            <a href="#" class="w-10 h-10 flex items-center justify-center rounded-full bg-secondary/50 text-white/80 hover:bg-primary/70 hover:text-white transition-colors">5</a>
          </div>
        </div>
        
        <!-- Sidebar -->
        <div class="sidebar w-full lg:w-1/3 animate-fade-up animate-delay-500">
          <!-- Buscador -->
          <div class="search-box bg-secondary/30 rounded-xl p-6 border border-primary/20 mb-8">
            <h3 class="text-xl font-bold mb-4 text-primary">Buscar</h3>
            <div class="search-form flex">
              <input type="text" placeholder="Buscar artículos..." class="flex-1 bg-secondary/70 border border-primary/30 rounded-l-lg p-3 text-white focus:border-primary focus:outline-none transition-colors">
              <button class="bg-primary/80 hover:bg-primary text-white p-3 rounded-r-lg transition-colors">
                <i class="fas fa-search"></i>
              </button>
            </div>
          </div>
          
          <!-- Categorías -->
          <div class="categories bg-secondary/30 rounded-xl p-6 border border-primary/20 mb-8">
            <h3 class="text-xl font-bold mb-4 text-primary">Categorías</h3>
            <ul class="space-y-2">
              {categories.map(category => (
                <li>
                  <a href="#" class="flex justify-between items-center text-white hover:text-primary transition-colors py-1">
                    <span>{category.name}</span>
                    <span class="bg-secondary/50 text-white/70 text-xs px-2 py-1 rounded-full">{category.count}</span>
                  </a>
                </li>
              ))}
            </ul>
          </div>
          
          <!-- Posts populares -->
          <div class="popular-posts bg-secondary/30 rounded-xl p-6 border border-primary/20 mb-8">
            <h3 class="text-xl font-bold mb-4 text-primary">Lo Más Leído</h3>
            <div class="space-y-4">
              {blogPosts.slice(0, 3).map((post, index) => (
                <div class="popular-post flex gap-3">
                  <div class="post-number flex items-center justify-center text-xl font-bold text-primary w-8">
                    {index + 1}
                  </div>
                  <div>
                    <h4 class="font-bold text-white hover:text-primary transition-colors">
                      <a href={`/blog/${post.slug}`}>{post.title}</a>
                    </h4>
                    <p class="text-white/70 text-sm">{post.date}</p>
                  </div>
                </div>
              ))}
            </div>
          </div>
          
          <!-- Tags -->
          <div class="tags bg-secondary/30 rounded-xl p-6 border border-primary/20">
            <h3 class="text-xl font-bold mb-4 text-primary">Tags Populares</h3>
            <div class="flex flex-wrap gap-2">
              {popularTags.map(tag => (
                <a href="#" class="bg-secondary/50 text-white hover:bg-primary/70 hover:text-white px-3 py-1 rounded-full text-sm transition-colors">
                  #{tag}
                </a>
              ))}
            </div>
          </div>
        </div>
      </div>

      <!-- Newsletter -->
      <div class="newsletter bg-secondary/50 rounded-xl p-8 border border-primary/20 mt-16 max-w-4xl mx-auto animate-fade-up animate-delay-600">
        <h3 class="text-2xl font-bold mb-3 text-primary text-center">Suscríbete a Nuestro Newsletter</h3>
        <p class="text-white/90 mb-6 text-center">Recibe las últimas noticias, guías y eventos directamente en tu correo.</p>
        <form class="newsletter-form flex flex-col sm:flex-row gap-3">
          <input type="email" placeholder="Tu correo electrónico" class="flex-1 bg-secondary/70 border border-primary/30 rounded-lg sm:rounded-r-none p-3 text-white focus:border-primary focus:outline-none transition-colors">
          <button type="submit" class="bg-primary/90 hover:bg-primary text-white font-bold py-3 px-6 rounded-lg sm:rounded-l-none transition-colors">
            Suscribirse
          </button>
        </form>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  // Script para animaciones suaves al hacer scroll, usando JavaScript puro para compatibilidad
  document.addEventListener('DOMContentLoaded', function() {
    const animatedElements = document.querySelectorAll('.animate-fade-up');
    
    function checkVisibility() {
      animatedElements.forEach(element => {
        const elementTop = element.getBoundingClientRect().top;
        const elementVisible = 150;
        
        if (elementTop < window.innerHeight - elementVisible) {
          element.style.opacity = '1';
          element.style.transform = 'translateY(0)';
        }
      });
    }
    
    // Configuración inicial
    animatedElements.forEach(element => {
      const delay = element.classList.contains('animate-delay-200') ? 200 :
                   element.classList.contains('animate-delay-300') ? 300 :
                   element.classList.contains('animate-delay-400') ? 400 :
                   element.classList.contains('animate-delay-500') ? 500 :
                   element.classList.contains('animate-delay-600') ? 600 : 0;
      
      element.style.opacity = '0';
      element.style.transform = 'translateY(30px)';
      element.style.transition = `opacity 0.6s ease, transform 0.6s ease`;
      element.style.transitionDelay = `${delay}ms`;
    });
    
    // Verificar visibilidad inicialmente y al hacer scroll
    window.addEventListener('scroll', checkVisibility);
    checkVisibility();
  });
</script>
